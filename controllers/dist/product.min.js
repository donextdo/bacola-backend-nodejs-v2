"use strict";var Product=require("../models/product"),_require=require("express"),request=_require.request,addProduct=function(r,t){var n,a,s,u,d,c,o,i,p,l,b,g,y,m,v,f;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.body.title,a=r.body.brand,s=r.body.description,u=r.body.image,d=r.body.category,c=r.body.quantity,o=r.body.price,i=r.body.isAvailable,p=r.body.price,l=r.body.type,b=r.body.mfgDate,g=r.body.expDate,y=r.body.discount,m=r.body.review,v=new Date,f=new Product({title:n,brand:a,description:s,image:u,category:d,quantity:c,price:o,isAvailable:i,skuNumber:p,type:l,mfgDate:b,expDate:g,discount:y,review:m,createdAt:v,updatedAt:null,deletedAt:null}),e.prev=18,e.next=21,regeneratorRuntime.awrap(f.save());case 21:if(e.sent)return e.abrupt("return",t.status(201).send({message:"New Product Insered"}));e.next=26;break;case 26:return e.abrupt("return",t.status(500).send({message:"Internal server error"}));case 27:e.next=33;break;case 29:return e.prev=29,e.t0=e.catch(18),console.log(e.t0),e.abrupt("return",t.status(400).send({message:"Error while saving products"}));case 33:case"end":return e.stop()}},null,null,[[18,29]])},getAllProduct=function(e,r){var t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(Product.find());case 3:if(t=e.sent)return e.abrupt("return",r.json(t));e.next=8;break;case 8:return e.abrupt("return",r.status(404).send({message:"Error occured when retrieving products"}));case 9:e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",r.status(500).send({message:"Internal server error"}));case 14:case"end":return e.stop()}},null,null,[[0,11]])},getProductById=function(r,t){var n,a;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.params.id,e.prev=1,e.next=4,regeneratorRuntime.awrap(Product.findById(n));case 4:if(a=e.sent)return e.abrupt("return",t.json(a));e.next=9;break;case 9:return e.abrupt("return",t.status(404).send({message:"No such product found"}));case 10:e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(1),e.abrupt("return",t.status(404).send({message:"No such product found"}));case 15:case"end":return e.stop()}},null,null,[[1,12]])},updateProduct=function(r,t){var n,a;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.params.id,a={Id:n,title:r.body.title,brand:r.body.brand,description:r.body.description,image:r.body.image,category:r.body.category,quantity:r.body.quantity,price:r.body.price,isAvailable:r.body.isAvailable,skuNumber:r.body.price,type:r.body.type,mfgDate:r.body.mfgDate,expDate:r.body.expDate,discount:r.body.discount,review:r.body.review,updatedAt:new Date},e.prev=2,e.next=5,regeneratorRuntime.awrap(Product.findOneAndUpdate({_id:n},a));case 5:if(e.sent)return e.abrupt("return",t.status(200).send({message:"Successfully updated Product "}));e.next=10;break;case 10:return e.abrupt("return",t.status(500).send({message:"Internal server error"}));case 11:e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(2),e.abrupt("return",t.status(400).send({message:"Unable to update"}));case 16:case"end":return e.stop()}},null,null,[[2,13]])},deleteUpdate=function(r,t){var n,a;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.params.id,e.next=3,regeneratorRuntime.awrap(Product.findById(n));case 3:return(a=e.sent).deletedAt=new Date,e.prev=5,e.next=8,regeneratorRuntime.awrap(a.save());case 8:if(e.sent)return e.abrupt("return",t.status(201).send({message:"delete date is updated"}));e.next=13;break;case 13:return e.abrupt("return",t.status(500).send({message:"Internal server error"}));case 14:e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(5),console.log(e.t0),e.abrupt("return",t.status(400).send({message:"Error while saving products"}));case 20:case"end":return e.stop()}},null,null,[[5,16]])},deleteProduct=function(r,t){var n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.params.id,e.prev=1,e.next=4,regeneratorRuntime.awrap(Product.findByIdAndDelete({_id:n}));case 4:if(e.sent)return e.abrupt("return",t.status(204).send({message:"Successfully deleted a Request"}));e.next=9;break;case 9:return e.abrupt("return",t.status(500).send({message:"Internal server error"}));case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),console.log(e.t0.message),e.abrupt("return",t.status(400).send({message:"Could not delete the request"}));case 16:case"end":return e.stop()}},null,null,[[1,12]])};module.exports={addProduct:addProduct,getAllProduct:getAllProduct,getProductById:getProductById,updateProduct:updateProduct,deleteProduct:deleteProduct,deleteUpdate:deleteUpdate};
//# sourceMappingURL=product.min.js.map
